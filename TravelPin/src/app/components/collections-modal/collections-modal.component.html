<div class="modal-overlay" (click)="cerrarModal()">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <!-- Header -->
    <div class="modal-header">
      <h2 class="modal-title">Añadir a un viaje</h2>
      <button class="close-btn" (click)="cerrarModal()">✕</button>
    </div>

    <!-- Destino seleccionado -->
    <div class="destino-info" *ngIf="nombreDestino">
      <p class="destino-label">Añadiendo:</p>
      <p class="destino-nombre">{{ nombreDestino }}</p>
    </div>

    <!-- Lista de colecciones -->
    <div class="collections-list" *ngIf="!mostrarNuevaColeccion">
      <button 
        *ngFor="let coleccion of colecciones"
        class="collection-item"
        [class.selected]="estaEnColeccion(coleccion)"
        (click)="agregarAColeccion(coleccion)">
        <span class="collection-icon">{{ coleccion.icono }}</span>
        <span class="collection-name">{{ coleccion.nombre }}</span>
        <span class="check-icon" *ngIf="estaEnColeccion(coleccion)">✓</span>
      </button>

      <!-- Botón crear nueva colección -->
      <button class="new-collection-btn" (click)="mostrarFormularioNuevaColeccion()">
        <span class="plus-icon">+</span>
        <span class="new-collection-text">Crear nueva colección</span>
      </button>
    </div>

    <!-- Formulario nueva colección -->
    <div class="new-collection-form" *ngIf="mostrarNuevaColeccion">
      <label class="form-label">Nombre de la colección</label>
      <input 
        type="text" 
        class="form-input" 
        placeholder="Ej: Verano 2025"
        [(ngModel)]="nuevaColeccionNombre"
        (keyup.enter)="crearNuevaColeccion()"
        autofocus>
      
      <div class="form-actions">
        <button class="btn-cancel" (click)="cancelarNuevaColeccion()">
          Cancelar
        </button>
        <button 
          class="btn-create" 
          (click)="crearNuevaColeccion()"
          [disabled]="!nuevaColeccionNombre.trim()">
          Crear
        </button>
      </div>
    </div>
  </div>
</div>