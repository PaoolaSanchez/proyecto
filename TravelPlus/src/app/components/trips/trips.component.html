<div class="trips-container">
  <!-- Header -->
  <header class="trips-header">
    <div class="header-content">
      <div class="logo">
        <div class="logo-icon">âœˆï¸</div>
        <span class="logo-text">TravelPlus</span>
      </div>
    </div>
  </header>

  <!-- Title Section -->
  <div class="title-section">
    <h1 class="trips-title">Mis Viajes</h1>
    <button class="btn-create" (click)="crearViaje()">Crear Viaje</button>
  </div>

  <!-- Trips List -->
  <main class="trips-content">
    <div *ngIf="viajes.length === 0" class="empty-state">
      <div class="empty-icon">âœˆï¸</div>
      <h3 class="empty-title">No tienes viajes planeados</h3>
      <p class="empty-text">Crea tu primer viaje y comienza a planear tu aventura</p>
      <button class="btn-empty-create" (click)="crearViaje()">Crear Viaje</button>
    </div>

    <div class="trips-grid">
      <div 
        *ngFor="let viaje of viajes" 
        class="trip-card"
        [class.finalizado]="viaje.finalizado"
        (click)="irADetalleViaje(viaje)">
        
        <!-- Trip Icon -->
        <div class="trip-icon">{{ viaje.icono }}</div>

        <!-- Trip Content -->
        <div class="trip-content">
          <h3 class="trip-name">{{ viaje.nombre }}</h3>
          
          <!-- Estado Badge -->
          <div class="estado-badge" [class.finalizado]="viaje.finalizado">
            {{ viaje.finalizado ? 'âœ“ Finalizado' : 'ğŸ“ PrÃ³ximo' }}
          </div>

          <!-- Fechas -->
          <div class="trip-dates-small" *ngIf="viaje.fechaInicio && viaje.fechaFin">
            <span class="trip-date">ğŸ“… {{ viaje.fechaInicio }}</span>
            <span class="trip-date-separator">â†’</span>
            <span class="trip-date">{{ viaje.fechaFin }}</span>
          </div>

          <!-- DÃ­as restantes -->
          <div class="dias-restantes" *ngIf="!viaje.finalizado && getDiasRestantes(viaje) !== null">
            <span class="dias-badge" [class.urgente]="getDiasRestantes(viaje)! <= 7">
              â° {{ getMensajeDiasRestantes(viaje) }}
            </span>
          </div>

          <!-- Destinos count -->
          <p class="trip-destinations">{{ getContadorDestinos(viaje) }}</p>

          <!-- Destinations Preview -->
          <div class="destinations-preview" *ngIf="viaje.destinos.length > 0">
            <img 
              *ngFor="let destino of viaje.destinos.slice(0, 3)" 
              [src]="destino.imagen" 
              [alt]="destino.nombre"
              class="destination-mini-img">
            <span class="more-destinations" *ngIf="viaje.destinos.length > 3">
              +{{ viaje.destinos.length - 3 }}
            </span>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="trip-actions">
          <button 
            class="btn-action edit" 
            (click)="editarViaje(viaje, $event)"
            title="Editar">
            âœï¸
          </button>
          <button 
            class="btn-action delete" 
            (click)="eliminarViaje(viaje, $event)"
            title="Eliminar">
            ğŸ—‘ï¸
          </button>
        </div>
      </div>
    </div>
  </main>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <button class="nav-item" 
            [class.active]="currentTab === 'inicio'"
            (click)="navegarTab('inicio')">
      <span class="nav-icon">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
          <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
      </span>
      <span class="nav-label">Inicio</span>
    </button>
    
    <button class="nav-item" 
            [class.active]="currentTab === 'explorar'"
            (click)="navegarTab('explorar')">
      <span class="nav-icon">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </span>
      <span class="nav-label">Explorar</span>
    </button>
    
    <button class="nav-item" 
            [class.active]="currentTab === 'viajes'"
            (click)="navegarTab('viajes')">
      <span class="nav-icon">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
          <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
        </svg>
      </span>
      <span class="nav-label">Viajes</span>
    </button>
    
    <button class="nav-item" 
            [class.active]="currentTab === 'favoritos'"
            (click)="navegarTab('favoritos')">
      <span class="nav-icon">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
      </span>
      <span class="nav-label">Favoritos</span>
    </button>
    
    <button class="nav-item" 
            [class.active]="currentTab === 'perfil'"
            (click)="navegarTab('perfil')">
      <span class="nav-icon">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
      </span>
      <span class="nav-label">Perfil</span>
    </button>
  </nav>
</div>

<div class="modal-overlay" *ngIf="mostrarModalCrearViaje" (click)="cerrarModalCrearViaje()">
  <div class="modal-crear-viaje" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2 class="modal-title">Planificar un nuevo Viaje</h2>
      <button class="btn-close-modal" (click)="cerrarModalCrearViaje()">âœ•</button>
    </div>

    <div class="modal-body">
      <div class="form-group">
        <label class="form-label">Nombre del viaje (ej. Verano en Italia)</label>
        <input 
          type="text" 
          class="form-input"
          [(ngModel)]="nuevoViajeNombre"
          placeholder="Nombre del viaje"
          maxlength="50">
      </div>

      <div class="form-subtitle">Describe tu aventura ...</div>

      <div class="form-row">
        <div class="form-group half">
          <label class="form-label">Fecha de Salida</label>
          <input 
            type="text" 
            class="form-input"
            [(ngModel)]="nuevoViajeFechaInicio"
            placeholder="dd/mm/aaaa">
        </div>

        <div class="form-group half">
          <label class="form-label">Fecha de Regreso</label>
          <input 
            type="text" 
            class="form-input"
            [(ngModel)]="nuevoViajeFechaFin"
            placeholder="dd/mm/aaaa">
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button class="btn-guardar-viaje" (click)="guardarNuevoViaje()">
        Guardar Viaje
      </button>
    </div>
  </div>
</div>

<!-- Modal Confirmar Eliminar Viaje -->
<div class="modal-overlay modal-eliminar-overlay" *ngIf="mostrarModalEliminar" (click)="cancelarEliminar()">
  <div class="modal-eliminar" (click)="$event.stopPropagation()">
    <div class="eliminar-icon-container">
      <span class="eliminar-emoji">ğŸ—‘ï¸</span>
    </div>
    <h2 class="eliminar-title">Â¿Eliminar viaje?</h2>
    <p class="eliminar-viaje-nombre" *ngIf="viajeAEliminar">{{ viajeAEliminar.icono }} {{ viajeAEliminar.nombre }}</p>
    <p class="eliminar-text">Esta acciÃ³n no se puede deshacer. Se eliminarÃ¡n todos los datos del viaje, incluyendo gastos e itinerario.</p>
    <div class="eliminar-buttons">
      <button class="btn-eliminar-cancel" (click)="cancelarEliminar()" [disabled]="eliminandoViaje">
        Cancelar
      </button>
      <button class="btn-eliminar-confirm" (click)="confirmarEliminar()" [disabled]="eliminandoViaje">
        <span *ngIf="!eliminandoViaje">SÃ­, eliminar</span>
        <span *ngIf="eliminandoViaje">Eliminando...</span>
      </button>
    </div>
  </div>
</div>