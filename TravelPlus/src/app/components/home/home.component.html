<div class="app-container">
  <!-- Modal de advertencia de autenticaci칩n -->
  <app-auth-warning-modal 
    [isVisible]="mostrarAuthWarning"
    (close)="closeAuthWarning()"
    (login)="onAuthWarningLogin()"
    (signup)="onAuthWarningSignup()">
  </app-auth-warning-modal>

  <!-- P치gina Principal -->
  <div *ngIf="!mostrarResultados && !mostrarDetalle && !mostrarExplorar && !mostrarViajes && !mostrarDetalleViaje && !mostrarFavoritos && !mostrarPerfil">
    
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <div class="logo-icon">九걾잺</div>
        <span class="logo-text">TravelPlus</span>
      </div>
      
      <div class="header-actions">
        <!-- Bot칩n Panel Agencia -->
        <button class="btn-agencia" (click)="irAPanelAgencia()" title="Panel de Agencia">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
          <span class="btn-agencia-text">Agencias</span>
        </button>

        <!-- Auth Buttons - Only show if not logged in -->
        <div class="auth-buttons" *ngIf="!isLoggedIn()">
          <button class="btn-login" (click)="navigateToLogin()">
            Iniciar Sesi칩n
          </button>
          <span class="auth-divider">/</span>
          <button class="btn-signup" (click)="navigateToSignup()">
            Crear cuenta
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Title Section -->
      <section class="title-section">
        <h1 class="main-title">Descubre tu Destino</h1>
        <p class="subtitle">Explora destinos 칰nicos con recomendaciones personalizadas</p>
        <button class="btn-primary" (click)="encontrarDestino()">
          Encuentra tu destino
        </button>
      </section>

      <!-- Destinations Grid -->
      <section class="destinations-grid">
        <div class="destination-card" *ngFor="let destino of destinos">
          <!-- Image Container -->
          <div class="card-image-container">
            <img [src]="destino.imagen" [alt]="destino.nombre" class="card-image">
            
            <!-- Category Badge -->
            <div class="category-badge" [style.background-color]="destino.colorCategoria">
              {{ destino.categoria }}
            </div>
            
            <!-- Favorite Button -->
            <button class="favorite-btn" 
                    [class.active]="destino.esFavorito"
                    (click)="toggleFavorito(destino)">
              <span class="heart-icon">{{ destino.esFavorito ? '仇벒잺' : '游밼' }}</span>
            </button>
          </div>

          <!-- Card Content -->
          <div class="card-content">
            <!-- Rating -->
            <div class="rating">
              <span class="stars">
                <span *ngFor="let estrella of getEstrellas(destino.rating)" class="star">
                  {{ estrella }}
                </span>
              </span>
              <span class="rating-value">{{ destino.rating }}</span>
            </div>

            <!-- Destination Name -->
            <h3 class="destination-name">{{ destino.nombre }}</h3>
            <p class="destination-country">游늸 {{ destino.pais }}</p>

            <!-- Action Button -->
            <button class="btn-options" (click)="verOpciones(destino)">
              Ver Opciones
            </button>
          </div>
        </div>
      </section>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <button class="nav-item" 
              [class.active]="currentTab === 'inicio'"
              (click)="cambiarTab('inicio')">
        <span class="nav-icon">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
          </svg>
        </span>
        <span class="nav-label">Inicio</span>
      </button>
      
      <button class="nav-item" 
              [class.active]="currentTab === 'explorar'"
              (click)="cambiarTab('explorar')">
        <span class="nav-icon">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </span>
        <span class="nav-label">Explorar</span>
      </button>
      
      <button class="nav-item" 
              [class.active]="currentTab === 'viajes'"
              (click)="cambiarTab('viajes')">
        <span class="nav-icon">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
            <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path>
          </svg>
        </span>
        <span class="nav-label">Viajes</span>
      </button>
      
      <button class="nav-item" 
              [class.active]="currentTab === 'favoritos'"
              (click)="cambiarTab('favoritos')">
        <span class="nav-icon">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
          </svg>
        </span>
        <span class="nav-label">Favoritos</span>
      </button>
      
      <button class="nav-item" 
              [class.active]="currentTab === 'perfil'"
              (click)="cambiarTab('perfil')">
        <span class="nav-icon">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </span>
        <span class="nav-label">Perfil</span>
      </button>
    </nav>
  </div>

  <!-- Vista de Favoritos -->
  <app-favorites 
    *ngIf="mostrarFavoritos && !mostrarDetalle"
    (navegarATab)="cambiarTab($event)"
    (verDetalle)="verDetalleDesdeFavoritos($event)">
  </app-favorites>

  <!-- P치gina Explorar -->
  <app-explore
    *ngIf="mostrarExplorar && !mostrarDetalle"
    (verDetalle)="verDetalleDesdeExplorar($event)"
    (navegarATab)="cambiarTab($event)">
  </app-explore>

  <!-- P치gina Viajes -->
  <app-trips
    *ngIf="mostrarViajes && !mostrarDetalle && !mostrarDetalleViaje"
    (verDetalle)="verDetalleDesdeViajes($event)"
    (verDetalleViaje)="verDetalleViajeDesdeTrips($event)"
    (navegarATab)="cambiarTab($event)">
  </app-trips>

  <!-- P치gina Detalle del Viaje -->
  <app-trip-detail
    *ngIf="mostrarDetalleViaje && !mostrarDetalle"
    [viajeId]="viajeSeleccionadoId"
    (volver)="volverDesdeTripDetail()"
    (verDetalleDestino)="verDetalleDestinoDesdeTrip($event)"
    (navegarATab)="cambiarTab($event)">
  </app-trip-detail>

   <!-- P치gina Perfil -->
  <app-profile
    *ngIf="mostrarPerfil"
    [contadorFavoritos]="getContadorFavoritos()"
    [contadorViajes]="getContadorViajes()"
    (navegarATab)="cambiarTab($event)">
  </app-profile>

  <!-- P치gina de Resultados -->
  <app-results 
    *ngIf="mostrarResultados && !mostrarDetalle"
    [respuestasEncuesta]="respuestasUsuario"
    (verDetalle)="verDetalleDesdeResultados($event)"
    (refinarBusqueda)="refinarBusqueda()"
    (verTodosDestinos)="verTodosDestinosDesdeResultados()">
  </app-results>

  <!-- P치gina de Detalle -->
  <app-destination-detail
    *ngIf="mostrarDetalle"
    [destinoId]="destinoSeleccionadoId"
    (volver)="volverDesdeDetalle()"
    (navegarATab)="cambiarTab($event)">
  </app-destination-detail>

  <!-- Survey Modal -->
  <app-survey 
    *ngIf="mostrarEncuesta"
    (cerrarEncuesta)="cerrarEncuesta()"
    (verResultados)="procesarResultados($event)">
  </app-survey>
</div>